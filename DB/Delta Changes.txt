--10-10-16

INSERT INTO FINITE_VALUE_TYPE (CODE, DESCRIPTION) VALUES ('CONTTYPE','CONTACT TYPE');

INSERT INTO FINITE_VALUES(CODE,TYPE_CODE,DESCRIPTION) VALUES ('VENDOR','CONTTYPE','Vendor');
INSERT INTO FINITE_VALUES(CODE,TYPE_CODE,DESCRIPTION) VALUES ('CUSTOMER','CONTTYPE','Customer');
INSERT INTO FINITE_VALUES(CODE,TYPE_CODE,DESCRIPTION) VALUES ('POTCUST','CONTTYPE','Potential Customer');
INSERT INTO FINITE_VALUES(CODE,TYPE_CODE,DESCRIPTION) VALUES ('TRANSPORT','CONTTYPE','Transporter');
INSERT INTO FINITE_VALUES(CODE,TYPE_CODE,DESCRIPTION) VALUES ('AGENT','CONTTYPE','Sales Agent');
INSERT INTO FINITE_VALUES(CODE,TYPE_CODE,DESCRIPTION) VALUES ('BPARTNER','CONTTYPE','Business Partner');




CREATE TABLE CONTACTS (
ID INT PRIMARY KEY AUTO_INCREMENT,
COMPANY_ID INT NOT NULL,
FIRST_NAME VARCHAR(50)  NOT NULL,
LAST_NAME VARCHAR(50)  NOT NULL,
DESCRIPTION VARCHAR(100),
PHONE VARCHAR(50) NOT NULL  ,
EMAIL VARCHAR(50) NOT NULL ,
CONTACT_TYPE VARCHAR(10),
ADDRESS1 VARCHAR(50),
ADDRESS2 VARCHAR(50),
ZIPCODE VARCHAR(50),
CITY VARCHAR(50),
LANDMARK VARCHAR(100),
ALTERNATEPHONE VARCHAR(50), 
IS_DELETED BOOLEAN DEFAULT FALSE,
CREATED_DATE DATETIME,
LAST_UPDATED_DATE DATETIME,
CREATED_BY VARCHAR(50),
LAST_UPDATED_BY VARCHAR(50),
VERSION INT DEFAULT 1,
FOREIGN KEY (COMPANY_ID) REFERENCES COMPANIES(ID),
FOREIGN KEY (CONTACT_TYPE) REFERENCES FINITE_VALUES(CODE)
);

INSERT INTO METADATA(ENTITY,CLASS_NAME) VALUES('CONTACT','com.rainbow.crm.contact.model.Contact');
----------------------

11-10-16
_________________________________________

CREATE TABLE FOLLOWUPS (
ID INT PRIMARY KEY AUTO_INCREMENT,
COMPANY_ID INT NOT NULL,
SALESLEAD_ID INT NOT NULL,
CONVERSATION BLOB,
CONFIDENCE_LEVEL VARCHAR(10),
COMMUNICATION_MODE VARCHAR(10),
OFFERED_PRICE FLOAT,
SALES_ASSOCIATE VARCHAR(50),
NEXT_FOLLOWUP DATETIME,
FINAL_FOLLOWUP BOOLEAN DEFAULT FALSE,
RESULT VARCHAR(10),
RESULT_REASON VARCHAR(10) ,
SALESASSOC_COMMENTS BLOB
IS_DELETED BOOLEAN DEFAULT FALSE,
CREATED_DATE DATETIME,
LAST_UPDATED_DATE DATETIME,
CREATED_BY VARCHAR(50),
LAST_UPDATED_BY VARCHAR(50),
VERSION INT DEFAULT 1,
FOREIGN KEY (COMPANY_ID) REFERENCES COMPANIES(ID),
FOREIGN KEY (CONFIDENCE_LEVEL) REFERENCES FINITE_VALUES(CODE),
FOREIGN KEY (SALESLEAD_ID) REFERENCES SALES_LEADS(ID),
FOREIGN KEY (COMMUNICATION_MODE) REFERENCES FINITE_VALUES(CODE),
FOREIGN KEY (RESULT) REFERENCES FINITE_VALUES(CODE),
FOREIGN KEY (RESULT_REASON) REFERENCES FINITE_VALUES(CODE)
);


INSERT INTO FINITE_VALUE_TYPE (CODE, DESCRIPTION) VALUES ('COMMMODE', 'MODE OF COMMUNICATION');
INSERT INTO FINITE_VALUE_TYPE (CODE, DESCRIPTION) VALUES ('CONFLEVEL', 'LEVEL OF CONFIDENCE');
INSERT INTO FINITE_VALUE_TYPE (CODE, DESCRIPTION) VALUES ('FLPRESULT', 'FOLLOW UP RESULT');
INSERT INTO FINITE_VALUE_TYPE (CODE, DESCRIPTION) VALUES ('SUCCREAS', 'REASON FOR SALE');
INSERT INTO FINITE_VALUE_TYPE (CODE, DESCRIPTION) VALUES ('FAILREAS', 'REASON FOR NO/SALE');

INSERT INTO FINITE_VALUES(CODE,TYPE_CODE,DESCRIPTION) VALUES ('PHONE','COMMMODE','Telephone');
INSERT INTO FINITE_VALUES(CODE,TYPE_CODE,DESCRIPTION) VALUES ('EMAIL','COMMMODE','Email');
INSERT INTO FINITE_VALUES(CODE,TYPE_CODE,DESCRIPTION) VALUES ('PERSVISIT','COMMMODE','Personal visit to Customer');
INSERT INTO FINITE_VALUES(CODE,TYPE_CODE,DESCRIPTION) VALUES ('PREMVISIT','COMMMODE','Customer visiting facility');

INSERT INTO FINITE_VALUES(CODE,TYPE_CODE,DESCRIPTION) VALUES ('HIGHCONF','CONFLEVEL','High level of confidence');
INSERT INTO FINITE_VALUES(CODE,TYPE_CODE,DESCRIPTION) VALUES ('UPMEDCONF','CONFLEVEL','Upper-Medium level of confidence');
INSERT INTO FINITE_VALUES(CODE,TYPE_CODE,DESCRIPTION) VALUES ('MEDCONF','CONFLEVEL','Medium level of confidence');
INSERT INTO FINITE_VALUES(CODE,TYPE_CODE,DESCRIPTION) VALUES ('LOWMEDCONF','CONFLEVEL','Lower-Medium level of confidence');
INSERT INTO FINITE_VALUES(CODE,TYPE_CODE,DESCRIPTION) VALUES ('LOWCONF','CONFLEVEL','Low level of confidence');

INSERT INTO FINITE_VALUES(CODE,TYPE_CODE,DESCRIPTION) VALUES ('SOLD','FLPRESULT','Sold');
INSERT INTO FINITE_VALUES(CODE,TYPE_CODE,DESCRIPTION) VALUES ('SLPENDING','FLPRESULT','Pending');
INSERT INTO FINITE_VALUES(CODE,TYPE_CODE,DESCRIPTION) VALUES ('NOSALE','FLPRESULT','No Sale');
INSERT INTO FINITE_VALUES(CODE,TYPE_CODE,DESCRIPTION) VALUES ('PARTSALE','FLPRESULT','Partial Sale');


INSERT INTO FINITE_VALUES(CODE,TYPE_CODE,DESCRIPTION) VALUES ('CUSTDESIRE','SUCCREAS','Desire of customer');
INSERT INTO FINITE_VALUES(CODE,TYPE_CODE,DESCRIPTION) VALUES ('LOWERPRICE','SUCCREAS','Price reduction');
INSERT INTO FINITE_VALUES(CODE,TYPE_CODE,DESCRIPTION) VALUES ('PERSUATION','SUCCREAS','Persuation');
INSERT INTO FINITE_VALUES(CODE,TYPE_CODE,DESCRIPTION) VALUES ('POSREP','SUCCREAS','Positive Reputation from other sources');
INSERT INTO FINITE_VALUES(CODE,TYPE_CODE,DESCRIPTION) VALUES ('REFERENCE','SUCCREAS','Reference/Recommendation from other customers');
INSERT INTO FINITE_VALUES(CODE,TYPE_CODE,DESCRIPTION) VALUES ('CUSTSATISF','SUCCREAS','Customer Satisfaction from previous sales');

INSERT INTO FINITE_VALUES(CODE,TYPE_CODE,DESCRIPTION) VALUES ('HIGHPRICE','FAILREAS','Higher Price');
INSERT INTO FINITE_VALUES(CODE,TYPE_CODE,DESCRIPTION) VALUES ('UNAVLBLE','FAILREAS','Unavailability of prod specification');
INSERT INTO FINITE_VALUES(CODE,TYPE_CODE,DESCRIPTION) VALUES ('SLSNEGL','FAILREAS','Negligence from sales');
INSERT INTO FINITE_VALUES(CODE,TYPE_CODE,DESCRIPTION) VALUES ('CUSTDISS','FAILREAS','Customer dissatisfaction from previous sales');
INSERT INTO FINITE_VALUES(CODE,TYPE_CODE,DESCRIPTION) VALUES ('NEGREP','FAILREAS','Negative reputation from other sources');
INSERT INTO FINITE_VALUES(CODE,TYPE_CODE,DESCRIPTION) VALUES ('COMPET','FAILREAS','Lost to competition');
INSERT INTO FINITE_VALUES(CODE,TYPE_CODE,DESCRIPTION) VALUES ('UNIDENT','FAILREAS','Unidentified reason');
__________________________________________________________________________________________________________________
23-OCT-16
Delete from finite_values where type_code = 'CONFLEVEL';

INSERT INTO FINITE_VALUES(CODE,TYPE_CODE,DESCRIPTION) VALUES ('HIGHCONF','CONFLEVEL','High');
INSERT INTO FINITE_VALUES(CODE,TYPE_CODE,DESCRIPTION) VALUES ('UPMEDCONF','CONFLEVEL','Upper-Medium');
INSERT INTO FINITE_VALUES(CODE,TYPE_CODE,DESCRIPTION) VALUES ('MEDCONF','CONFLEVEL','Medium');
INSERT INTO FINITE_VALUES(CODE,TYPE_CODE,DESCRIPTION) VALUES ('LOWMEDCONF','CONFLEVEL','Lower-Medium');
INSERT INTO FINITE_VALUES(CODE,TYPE_CODE,DESCRIPTION) VALUES ('LOWCONF','CONFLEVEL','Low');
__________________________________________________________________________________________________________________
25-0ct-16
INSERT INTO METADATA(ENTITY,CLASS_NAME) VALUES('FOLLOWUP','com.rainbow.crm.followup.model.Followup');
________________________
5- nov -11

CREATE TABLE ALERTS (
ID INT PRIMARY KEY AUTO_INCREMENT,
COMPANY_ID INT NOT NULL,
DIVISION_ID INT NOT NULL,
RAISED_DATE DATETIME NOT NULL,
ACTION_DATE DATETIME,
ACKNO_DATE DATETIME ,
ALERT_TYPE VARCHAR(10) NOT NULL,
STATUS VARCHAR(10) NOT NULL,
OWNER  VARCHAR(50),
RAISED_BY VARCHAR(50),
DATA VARCHAR(50) NOT NULL,
URL VARCHAR(100),
IS_DELETED BOOLEAN DEFAULT FALSE,
CREATED_DATE DATETIME,
LAST_UPDATED_DATE DATETIME,
CREATED_BY VARCHAR(50),
LAST_UPDATED_BY VARCHAR(50),
VERSION INT DEFAULT 1,
FOREIGN KEY (COMPANY_ID) REFERENCES COMPANIES(ID),
FOREIGN KEY (DIVISION_ID) REFERENCES DIVISIONS(ID),
FOREIGN KEY (ALERT_TYPE) REFERENCES FINITE_VALUES(CODE),
FOREIGN KEY (STATUS) REFERENCES FINITE_VALUES(CODE),
FOREIGN KEY (OWNER) REFERENCES USERS(USER_ID)
);

INSERT INTO FINITE_VALUE_TYPE (CODE, DESCRIPTION) VALUES ('ALTTYPE', 'ALERT TYPE');
INSERT INTO FINITE_VALUE_TYPE (CODE, DESCRIPTION) VALUES ('ALTSTATUS', 'ALERT STATUS');

INSERT INTO FINITE_VALUES(CODE,TYPE_CODE,DESCRIPTION) VALUES ('ALTSLSLEAD','ALTTYPE','Sales Lead Alert');
INSERT INTO FINITE_VALUES(CODE,TYPE_CODE,DESCRIPTION) VALUES ('ALTFLLWUP','ALTTYPE','Follow Up Date');
INSERT INTO FINITE_VALUES(CODE,TYPE_CODE,DESCRIPTION) VALUES ('ALTINVSHRT','ALTTYPE','Inventory Shortage');
INSERT INTO FINITE_VALUES(CODE,TYPE_CODE,DESCRIPTION) VALUES ('ALTAPP','ALTTYPE','Appointment for the day');



INSERT INTO FINITE_VALUES(CODE,TYPE_CODE,DESCRIPTION) VALUES ('ALTOPN','ALTSTATUS','Open');
INSERT INTO FINITE_VALUES(CODE,TYPE_CODE,DESCRIPTION) VALUES ('ALTACK','ALTSTATUS','Acknowledged');
INSERT INTO FINITE_VALUES(CODE,TYPE_CODE,DESCRIPTION) VALUES ('ALTVOID','ALTSTATUS','Voided');
INSERT INTO FINITE_VALUES(CODE,TYPE_CODE,DESCRIPTION) VALUES ('ALTEXPRD','ALTSTATUS','Expired');
_________________________________________________________________________________________________________________________________

17-nov-11

ALTER TABLE  SALES_PERIODS ADD IS_START_ALERTED BOOLEAN DEFAULT FALSE;
ALTER TABLE  SALES_PERIODS ADD IS_END_ALERTED BOOLEAN DEFAULT FALSE;
ALTER TABLE  SALES_LEADS ADD IS_ALERTED BOOLEAN DEFAULT FALSE;
ALTER TABLE  FOLLOWUPS ADD IS_ALERTED BOOLEAN DEFAULT FALSE;

INSERT INTO FINITE_VALUES(CODE,TYPE_CODE,DESCRIPTION) VALUES ('ALTSPBEGIN','ALTTYPE','Sales Period Begin');
INSERT INTO FINITE_VALUES(CODE,TYPE_CODE,DESCRIPTION) VALUES ('ALTSPEND','ALTTYPE','Sales Period End');
________________________________________________________________________________________________________________________________
7-DEC-11

INSERT INTO FINITE_VALUES(CODE,TYPE_CODE,DESCRIPTION) VALUES ('ALTDLVDUE','ALTTYPE','Delivery Due');
INSERT INTO FINITE_VALUES(CODE,TYPE_CODE,DESCRIPTION) VALUES ('ALTPYMDUE','ALTTYPE','Payment Due');


INSERT INTO FINITE_VALUE_TYPE (CODE, DESCRIPTION) VALUES ('DLVMODE', 'DELIVERY MODE');


INSERT INTO FINITE_VALUES(CODE,TYPE_CODE,DESCRIPTION) VALUES ('PICKUP','DLVMODE','Pickup at source');
INSERT INTO FINITE_VALUES(CODE,TYPE_CODE,DESCRIPTION) VALUES ('COURIER','DLVMODE','Delivery by courier');
INSERT INTO FINITE_VALUES(CODE,TYPE_CODE,DESCRIPTION) VALUES ('INTERN','DLVMODE','Delivery by internal transport');
INSERT INTO FINITE_VALUES(CODE,TYPE_CODE,DESCRIPTION) VALUES ('POSTAL','DLVMODE','Delivery by Postal Service');

ALTER TABLE SALES ADD  IS_FUTUREDELIVERY BOOLEAN DEFAULT FALSE ;
ALTER TABLE SALES ADD DELIVERY_MODE VARCHAR(10);
ALTER TABLE SALES ADD DELIVERY_AGENT VARCHAR(100) ;
ALTER TABLE SALES ADD DELIVERY_DATE  DATETIME ;
ALTER TABLE SALES ADD PAYMENT_DUE_DATE DATETIME ;

ALTER TABLE SALES ADD FOREIGN KEY (DELIVERY_MODE) REFERENCES FINITE_VALUES(CODE);

_______________________________________________________________________________________________________

14- DEC - 11

INSERT INTO FINITE_VALUE_TYPE (CODE, DESCRIPTION) VALUES ('SLORDTYPE', 'SALES ORDER TYPE');

INSERT INTO FINITE_VALUES(CODE,TYPE_CODE,DESCRIPTION) VALUES ('ECOM','SLORDTYPE','E-Commerce Order');
INSERT INTO FINITE_VALUES(CODE,TYPE_CODE,DESCRIPTION) VALUES ('STRSALE','SLORDTYPE','Store Sale');
INSERT INTO FINITE_VALUES(CODE,TYPE_CODE,DESCRIPTION) VALUES ('CNTRACT','SLORDTYPE','Contract');

ALTER TABLE SALES ADD ORDER_TYPE VARCHAR(10);
________________________________________________________________________________________________________

18-DEC-16

INSERT INTO FINITE_VALUE_TYPE (CODE, DESCRIPTION) VALUES ('ADDTYPE', 'ADDRESS TYPE');

INSERT INTO FINITE_VALUES(CODE,TYPE_CODE,DESCRIPTION) VALUES ('BLLNG','ADDTYPE','Billing');
INSERT INTO FINITE_VALUES(CODE,TYPE_CODE,DESCRIPTION) VALUES ('SHPPRM','ADDTYPE','Shipping Primary');
INSERT INTO FINITE_VALUES(CODE,TYPE_CODE,DESCRIPTION) VALUES ('SHPSEC','ADDTYPE','Shipping Secondary');


CREATE TABLE ADDRESSES (
ID INT PRIMARY KEY AUTO_INCREMENT,
COMPANY_ID INT NOT NULL,
DIVISION_ID INT NOT NULL,
CUSTOMER_ID INT,
ADDRESS_TYPE VARCHAR(10) NOT NULL,
RECIPIENT VARCHAR(50) NOT NULL,
ADDRESS1 VARCHAR(50) NOT NULL,
ADDRESS2 VARCHAR(50) NOT NULL,
ZIPCODE VARCHAR(40) NOT NULL,
CITY VARCHAR(40) NOT NULL,
STATE VARCHAR(40) NOT NULL,
COUNTRY VARCHAR(40),
PHONE VARCHAR(40),
EMAIL VARCHAR(40),
IS_DELETED BOOLEAN DEFAULT FALSE,
CREATED_DATE DATETIME,
LAST_UPDATED_DATE DATETIME,
CREATED_BY VARCHAR(50),
LAST_UPDATED_BY VARCHAR(50),
VERSION INT DEFAULT 1,
FOREIGN KEY (COMPANY_ID) REFERENCES COMPANIES(ID),
FOREIGN KEY (DIVISION_ID) REFERENCES DIVISIONS(ID),
FOREIGN KEY (ADDRESS_TYPE) REFERENCES FINITE_VALUES(CODE),
FOREIGN KEY (CUSTOMER_ID) REFERENCES CUSTOMERS(ID)
);

__________________________________________________________________________________________________________

19 DESC

ALTER TABLE SALES ADD DELIVERY_ADDRESS_ID INT;

ALTER TABLE SALES ADD FOREIGN KEY (DELIVERY_ADDRESS_ID) REFERENCES ADDRESSES(ID);


ALTER TABLE ADDRESSES DROP FOREIGN KEY  addresses_ibfk_2;
ALTER TABLE ADDRESSES DROP FOREIGN KEY FKlj5s9f32rgq29vbruh84ufv0;
ALTER TABLE ADDRESSES DROP DIVISION_ID;