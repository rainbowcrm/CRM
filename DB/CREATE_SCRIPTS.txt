create database CRMSAAS
use CRMSAAS


CREATE TABLE FINITE_VALUE_TYPE (
CODE VARCHAR(10) PRIMARY KEY,
DESCRIPTION VARCHAR(25)
);
  
CREATE TABLE FINITE_VALUES (
CODE VARCHAR(10) PRIMARY KEY,
TYPE_CODE VARCHAR(10),
DESCRIPTION VARCHAR(50),
IS_DEFAULT BOOLEAN DEFAULT FALSE,
FOREIGN KEY (TYPE_CODE) REFERENCES FINITE_VALUE_TYPE(CODE) 
);

CREATE TABLE GENERATED_PKS (
TBL_NAME VARCHAR(40) PRIMARY KEY,
CURRENT_MAX LONG
);


CREATE TABLE COMPANIES (
ID INT PRIMARY KEY AUTO_INCREMENT,
COMPANY_CODE VARCHAR(10) NOT NULL UNIQUE,
COMPANY_NAME VARCHAR(50) NOT NULL UNIQUE,
ADDRESS1 VARCHAR(50),
ADDRESS2 VARCHAR(50),
ZIPCODE VARCHAR(50),
CITY VARCHAR(50),
PHONE    VARCHAR(20),
INDUSTRY_TYPE VARCHAR(10) NOT NULL,
BUSINESS_TYPE VARCHAR(10) NOT NULL,
STATE  VARCHAR(30),
COUNTRY  VARCHAR(30),
ADMIN_NAME VARCHAR(30),
NO_DIVISIONS INT,
NO_USERS INT, 
REGISTRATION_DATE DATETIME,
ACTIVATION_DATE DATETIME,
SERVICE_EXPIRY_DATE DATETIME,
IS_ACTIVE BOOLEAN DEFAULT TRUE ,
IS_DELETED BOOLEAN DEFAULT FALSE,
CREATED_DATE DATETIME,
LAST_UPDATED_DATE DATETIME,
CREATED_BY VARCHAR(50),
LAST_UPDATED_BY VARCHAR(50),
VERSION INT DEFAULT 1,
FOREIGN KEY (INDUSTRY_TYPE) REFERENCES FINITE_VALUES(CODE),
FOREIGN KEY (BUSINESS_TYPE) REFERENCES FINITE_VALUES(CODE)
);


CREATE TABLE DIVISIONS (
ID INT PRIMARY KEY AUTO_INCREMENT,
DIVISION_CODE VARCHAR(10) NOT NULL ,
DIVISION_NAME VARCHAR(50) NOT NULL ,
ADDRESS1 VARCHAR(50),
ADDRESS2 VARCHAR(50),
ZIPCODE VARCHAR(50),
CITY VARCHAR(50),
EMAIL VARCHAR(50),
PHONE    VARCHAR(20),
COMPANY_ID INT NOT NULL,
AREA  VARCHAR(20),
DIV_TYPE VARCHAR(10),
MANAGER VARCHAR(50), 
NO_EMPLOYEES INT,
IS_DELETED BOOLEAN DEFAULT FALSE,
CREATED_DATE DATETIME,
LAST_UPDATED_DATE DATETIME,
CREATED_BY VARCHAR(50),
LAST_UPDATED_BY VARCHAR(50),
VERSION INT DEFAULT 1,
FOREIGN KEY (COMPANY_ID) REFERENCES COMPANIES(ID),
FOREIGN KEY (DIV_TYPE) REFERENCES FINITE_VALUES(CODE)
);


CREATE TABLE USERS (
USER_ID VARCHAR(50) PRIMARY KEY,
COMPANY_ID INT,
PASSWORD VARCHAR(50) NOT NULL,
ROLE_TYPE VARCHAR(10),
FIRST_NAME VARCHAR(50),
LAST_NAME VARCHAR(50),
PHONE VARCHAR(50) NOT NULL UNIQUE ,
EMAIL VARCHAR(50) NOT NULL UNIQUE,
ADDRESS1 VARCHAR(50),
ADDRESS2 VARCHAR(50),
ZIPCODE VARCHAR(50),
CITY VARCHAR(50),
DIVISION_ID INT,
IS_ACTIVE BOOLEAN DEFAULT TRUE ,
IS_DELETED BOOLEAN DEFAULT FALSE,
CREATED_DATE DATETIME,
LAST_UPDATED_DATE DATETIME,
CREATED_BY VARCHAR(50),
LAST_UPDATED_BY VARCHAR(50),
VERSION INT DEFAULT 1,
FOREIGN KEY (ROLE_TYPE) REFERENCES FINITE_VALUES(CODE),
FOREIGN KEY (COMPANY_ID) REFERENCES COMPANIES(ID),
FOREIGN KEY (DIVISION_ID) REFERENCES DIVISIONS(ID)
);

CREATE TABLE NEXTUP_CONFIG (
COMPANY_ID INT NOT NULL,
PROGRAM VARCHAR(50),
FIELD1_TYPE  VARCHAR(10),
FIELD1_WIDTH  INT,
FIELD1_VAULE  VARCHAR(10),
FIELD2_TYPE  VARCHAR(10),
FIELD2_WIDTH  INT,
FIELD2_VAULE  VARCHAR(10),
FIELD3_TYPE  VARCHAR(10),
FIELD3_WIDTH  INT,
FIELD3_VAULE  VARCHAR(10),
FIELD4_TYPE  VARCHAR(10),
FIELD4_WIDTH  INT,
FIELD4_VAULE  VARCHAR(10),
FOREIGN KEY (FIELD1_TYPE) REFERENCES FINITE_VALUES(CODE),
FOREIGN KEY (FIELD2_TYPE) REFERENCES FINITE_VALUES(CODE),
FOREIGN KEY (FIELD3_TYPE) REFERENCES FINITE_VALUES(CODE),
FOREIGN KEY (FIELD4_TYPE) REFERENCES FINITE_VALUES(CODE)
);


CREATE TABLE NEXTUP_VALUES (
COMPANY_ID INT NOT NULL,
DIVISION_ID INT NOT NULL,
PROGRAM VARCHAR(50) ,
SEQ_VALUE INT  NOT NULL
);


CREATE TABLE LOGIN_RECORDS(
TOKEN_ID VARCHAR(50) PRIMARY KEY,
USER_ID VARCHAR(50) ,
SESSION_ID VARCHAR(50),
LOGGED_IN_TIME DATETIME, 
LOGGED_OFF_TIME DATETIME, 
EXPIRED_TIME DATETIME,
EXTRA_PROPERTIES BLOB ,
FOREIGN KEY (USER_ID) REFERENCES USERS(USER_ID)
);

ALTER TABLE LOGIN_RECORDS ADD INDEX INDX_SESSION_ID (SESSION_ID);
ALTER TABLE LOGIN_RECORDS ADD INDEX INDX_USER_ID (USER_ID);

CREATE TABLE FILTERS (
ID INT PRIMARY KEY AUTO_INCREMENT,
COMPANY_ID INT NOT NULL,
USER_ID VARCHAR(50) NOT NULL,
PAGE VARCHAR(150)  NOT NULL,
NAME VARCHAR(50)  NOT NULL,
IS_PUBLIC BOOLEAN DEFAULT FALSE,
IS_DELETED BOOLEAN DEFAULT FALSE,
CREATED_DATE DATETIME,
LAST_UPDATED_DATE DATETIME,
CREATED_BY VARCHAR(50),
LAST_UPDATED_BY VARCHAR(50),
VERSION INT DEFAULT 1,
FOREIGN KEY (USER_ID) REFERENCES USERS(USER_ID),
FOREIGN KEY (COMPANY_ID) REFERENCES COMPANIES(ID)
);

CREATE TABLE FILTER_DETAILS(
ID INT PRIMARY KEY AUTO_INCREMENT,
FILTER_ID INT NOT NULL,
FIELD VARCHAR(50),
VALUE VARCHAR(50),
FOREIGN KEY (FILTER_ID) REFERENCES FILTERS(ID)
);

CREATE TABLE CATEGORIES (
ID INT PRIMARY KEY AUTO_INCREMENT,
COMPANY_ID INT NOT NULL,
CATEGORY_NAME VARCHAR(50)  NOT NULL,
DESCRIPTION VARCHAR(100),
PRIMARY_UOM VARCHAR(10) NOT NULL,
IS_DELETED BOOLEAN DEFAULT FALSE,
CREATED_DATE DATETIME,
LAST_UPDATED_DATE DATETIME,
CREATED_BY VARCHAR(50),
LAST_UPDATED_BY VARCHAR(50),
VERSION INT DEFAULT 1,
FOREIGN KEY (COMPANY_ID) REFERENCES COMPANIES(ID),
FOREIGN KEY (PRIMARY_UOM) REFERENCES FINITE_VALUES(CODE)
);

CREATE TABLE PRODUCTS (
ID INT PRIMARY KEY AUTO_INCREMENT,
COMPANY_ID INT NOT NULL,
PRODUCT_NAME VARCHAR(50)  NOT NULL,
DESCRIPTION VARCHAR(100),
CATEGORY_ID INT NOT NULL,
IS_DELETED BOOLEAN DEFAULT FALSE,
CREATED_DATE DATETIME,
LAST_UPDATED_DATE DATETIME,
CREATED_BY VARCHAR(50),
LAST_UPDATED_BY VARCHAR(50),
VERSION INT DEFAULT 1,
FOREIGN KEY (COMPANY_ID) REFERENCES COMPANIES(ID),
FOREIGN KEY (CATEGORY_ID) REFERENCES CATEGORIES(ID)
);

CREATE TABLE UOMS  (
ID INT PRIMARY KEY AUTO_INCREMENT,
COMPANY_ID INT ,
UOM_CODE VARCHAR(20)  NOT NULL,
DESCRIPTION VARCHAR(100),
PRIMARY_UOM VARCHAR(10) NOT NULL,
IS_DELETED BOOLEAN DEFAULT FALSE,
CREATED_DATE DATETIME,
LAST_UPDATED_DATE DATETIME,
CREATED_BY VARCHAR(50),
LAST_UPDATED_BY VARCHAR(50),
VERSION INT DEFAULT 1,
FOREIGN KEY (COMPANY_ID) REFERENCES COMPANIES(ID),
FOREIGN KEY (PRIMARY_UOM) REFERENCES FINITE_VALUES(CODE)
);

CREATE TABLE ITEMS (
ID INT PRIMARY KEY AUTO_INCREMENT,
COMPANY_ID INT NOT NULL,
ITEM_CODE VARCHAR(50)  NOT NULL,
BARCODE VARCHAR(50)  NOT NULL,
ITEM_NAME VARCHAR(50)  NOT NULL,
DESCRIPTION VARCHAR(100),
PRODUCT_ID INT NOT NULL,
COLOR VARCHAR(50),
SIZE VARCHAR(50),
MANUFACTURER VARCHAR(50),
ITEM_CLASS  VARCHAR(10),
UOM_ID INT NOT NULL,
PURCHASE_PRICE FLOAT,
MAX_PRICE FLOAT,
RETAIL_PRICE  FLOAT,
WHOLESALE_PRICE FLOAT,
BREAK_EVEN_PRICE FLOAT,
PROMOTION_PRICE FLOAT,
MAX_DISCOUNT FLOAT,
ON_PROMOTION BOOLEAN DEFAULT FALSE,
SPECIFICATION VARCHAR(250),
IS_DELETED BOOLEAN DEFAULT FALSE,
CREATED_DATE DATETIME,
LAST_UPDATED_DATE DATETIME,
CREATED_BY VARCHAR(50),
LAST_UPDATED_BY VARCHAR(50),
VERSION INT DEFAULT 1,
FOREIGN KEY (COMPANY_ID) REFERENCES COMPANIES(ID),
FOREIGN KEY (PRODUCT_ID) REFERENCES CATEGORIES(ID),
FOREIGN KEY (UOM_ID) REFERENCES UOMS(ID)
);


CREATE TABLE VENDORS (
ID INT PRIMARY KEY AUTO_INCREMENT,
COMPANY_ID INT NOT NULL,
VENDOR_CODE VARCHAR(50)  NOT NULL,
VENDOR_NAME VARCHAR(50)  NOT NULL,
DESCRIPTION VARCHAR(100),
PHONE VARCHAR(50) NOT NULL  ,
EMAIL VARCHAR(50) NOT NULL ,
ADDRESS1 VARCHAR(50),
ADDRESS2 VARCHAR(50),
ZIPCODE VARCHAR(50),
CITY VARCHAR(50),
CREDIT_LIMIT FLOAT,
IS_DELETED BOOLEAN DEFAULT FALSE,
CREATED_DATE DATETIME,
LAST_UPDATED_DATE DATETIME,
CREATED_BY VARCHAR(50),
LAST_UPDATED_BY VARCHAR(50),
VERSION INT DEFAULT 1,
FOREIGN KEY (COMPANY_ID) REFERENCES COMPANIES(ID)
);


CREATE TABLE CUSTOMERS (
ID INT PRIMARY KEY AUTO_INCREMENT,
COMPANY_ID INT NOT NULL,
FIRST_NAME VARCHAR(50)  NOT NULL,
LAST_NAME VARCHAR(50)  NOT NULL,
DESCRIPTION VARCHAR(100),
PHONE VARCHAR(50) NOT NULL  ,
EMAIL VARCHAR(50) NOT NULL ,
ADDRESS1 VARCHAR(50),
ADDRESS2 VARCHAR(50),
ZIPCODE VARCHAR(50),
CITY VARCHAR(50),
CREDIT_LIMIT FLOAT,
LANDMARK VARCHAR(100),
ALTERNATEPHONE VARCHAR(50), 
IS_DELETED BOOLEAN DEFAULT FALSE,
CREATED_DATE DATETIME,
LAST_UPDATED_DATE DATETIME,
CREATED_BY VARCHAR(50),
LAST_UPDATED_BY VARCHAR(50),
VERSION INT DEFAULT 1,
FOREIGN KEY (COMPANY_ID) REFERENCES COMPANIES(ID)
);

CREATE TABLE ITEM_IMAGES (
ID INT PRIMARY KEY AUTO_INCREMENT,
ITEM_ID INT NOT NULL,
SUFFIX CHAR ,
IMAGE_FILE VARCHAR(50)  NOT NULL,
IS_DELETED BOOLEAN DEFAULT FALSE,
CREATED_DATE DATETIME,
LAST_UPDATED_DATE DATETIME,
CREATED_BY VARCHAR(50),
LAST_UPDATED_BY VARCHAR(50),
VERSION INT DEFAULT 1,
FOREIGN KEY (ITEM_ID) REFERENCES ITEMS(ID)
);

CREATE TABLE INVENTORY (
ID INT PRIMARY KEY AUTO_INCREMENT,
COMPANY_ID INT NOT NULL,
DIVISION_ID INT NOT NULL,
ITEM_ID INT NOT NULL,
OPENING_QTY INT NOT NULL,
CURRENT_QTY INT ,
CREATED_DATE DATETIME,
LAST_UPDATED_DATE DATETIME,
CREATED_BY VARCHAR(50),
LAST_UPDATED_BY VARCHAR(50),
FOREIGN KEY (COMPANY_ID) REFERENCES COMPANIES(ID),
FOREIGN KEY (ITEM_ID) REFERENCES ITEMS(ID),
FOREIGN KEY (DIVISION_ID) REFERENCES DIVISIONS(ID)
);


CREATE TABLE METADATA (
ENTITY VARCHAR(50) PRIMARY KEY,
CLASS_NAME VARCHAR(200)
);


CREATE TABLE PURCHASES (
ID INT PRIMARY KEY AUTO_INCREMENT,
COMPANY_ID INT NOT NULL,
DIVISION_ID INT NOT NULL,
BILL_NUMBER VARCHAR(50),
DOC_NUMBER VARCHAR(50),
VENDOR_ID  INT NOT NULL,
PURCHASE_DATE DATETIME,
HD_DISC_AMOUNT FLOAT,
HD_DISC_PERCENT FLOAT,
TOTAL_DISCOUNT FLOAT,
TAX_PERCENT FLOAT,
TAX_AMOUNT FLOAT,
NET_AMOUNT FLOAT,
CREDIT_PURCHASE BOOLEAN DEFAULT FALSE,
IS_SETTLED BOOLEAN DEFAULT TRUE,
IS_CANCELLED BOOLEAN DEFAULT FALSE,
IS_RETURNED BOOLEAN DEFAULT FALSE,
COMMENTS VARCHAR(200),
CREATED_DATE DATETIME,
LAST_UPDATED_DATE DATETIME,
CREATED_BY VARCHAR(50),
LAST_UPDATED_BY VARCHAR(50),
VERSION INT DEFAULT 1,
FOREIGN KEY (DIVISION_ID) REFERENCES DIVISIONS(ID),
FOREIGN KEY (COMPANY_ID) REFERENCES COMPANIES(ID),
FOREIGN KEY (VENDOR_ID) REFERENCES VENDORS(ID)
);

CREATE TABLE PURCHASE_LINES (
ID INT PRIMARY KEY ,
PURCHASE_ID INT NOT NULL,
COMPANY_ID INT NOT NULL,
DOC_NUMBER VARCHAR(50) NOT NULL,
LINE_NUMBER INT NOT NULL,
ITEM_ID INT NOT NULL,
UNIT_PRICE FLOAT,
QTY INT NOT NULL,
COMMENTS VARCHAR(200),
UNIT_DISCOUNT FLOAT  ,
DISC_PERCENT FLOAT  ,
LINE_TOTDISC FLOAT  ,
TAX_PERCENT FLOAT,
TAX_AMOUNT FLOAT,
LINE_TOTAL FLOAT,
IS_VOIDED BOOLEAN DEFAULT FALSE,
CREATED_DATE DATETIME,
LAST_UPDATED_DATE DATETIME,
CREATED_BY VARCHAR(50),
LAST_UPDATED_BY VARCHAR(50),
VERSION INT DEFAULT 1,
FOREIGN KEY (COMPANY_ID) REFERENCES COMPANIES(ID),
FOREIGN KEY (ITEM_ID) REFERENCES ITEMS(ID),
FOREIGN KEY (PURCHASE_ID) REFERENCES PURCHASES(ID)
);



CREATE TABLE SALES_PERIODS (
ID INT PRIMARY KEY ,
COMPANY_ID INT NOT NULL,
PERIOD VARCHAR(50) NOT NULL,
DESCRIPTION VARCHAR(200),
DIVISION_ID INT ,
FROM_DATE DATETIME,
TO_DATE DATETIME,
ADDITIONAL_TARGET FLOAT, 
TOTAL_TARGET FLOAT, 
IS_VOIDED BOOLEAN DEFAULT FALSE,
CREATED_DATE DATETIME,
LAST_UPDATED_DATE DATETIME,
CREATED_BY VARCHAR(50),
LAST_UPDATED_BY VARCHAR(50),
VERSION INT DEFAULT 1,
FOREIGN KEY (COMPANY_ID) REFERENCES COMPANIES(ID),
FOREIGN KEY (DIVISION_ID) REFERENCES DIVISIONS(ID)
);

CREATE TABLE SALESPERIOD_LINES (
ID INT PRIMARY KEY ,
COMPANY_ID INT NOT NULL,
SALES_PERIOD_ID INT NOT NULL,
PERIOD VARCHAR(50) NOT NULL,
LINE_NUMBER INT NOT NULL,
ITEM_ID INT NOT NULL,
TARGET_QTY INT NOT NULL,
TARGET_PRICE FLOAT NOT NULL,
LINE_TOTAL FLOAT NOT NULL,
COMMENTS VARCHAR(200),
IS_VOIDED BOOLEAN DEFAULT FALSE,
CREATED_DATE DATETIME,
LAST_UPDATED_DATE DATETIME,
CREATED_BY VARCHAR(50),
LAST_UPDATED_BY VARCHAR(50),
VERSION INT DEFAULT 1,
FOREIGN KEY (COMPANY_ID) REFERENCES COMPANIES(ID),
FOREIGN KEY (ITEM_ID) REFERENCES ITEMS(ID),
FOREIGN KEY (SALES_PERIOD_ID) REFERENCES PURCHASES(ID)
);
 

CREATE TABLE SALES (
ID INT PRIMARY KEY AUTO_INCREMENT,
COMPANY_ID INT NOT NULL,
DIVISION_ID INT NOT NULL,
BILL_NUMBER VARCHAR(50),
CUSTOMER_ID  INT,
SALES_DATE DATETIME,
SALES_REF VARCHAR(50),
SALES_MAN VARCHAR(50),
HD_DISC_AMOUNT FLOAT,
HD_DISC_PERCENT FLOAT,
TOTAL_DISCOUNT FLOAT,
TAX_PERCENT FLOAT,
TAX_AMOUNT FLOAT,
NET_AMOUNT FLOAT,
CREDIT_SALE BOOLEAN DEFAULT FALSE,
IS_SETTLED BOOLEAN DEFAULT TRUE,
IS_VOIDED BOOLEAN DEFAULT FALSE,
IS_RETURNED BOOLEAN DEFAULT FALSE,
COMMENTS VARCHAR(200),
CREATED_DATE DATETIME,
LAST_UPDATED_DATE DATETIME,
CREATED_BY VARCHAR(50),
LAST_UPDATED_BY VARCHAR(50),
VERSION INT DEFAULT 1,
FOREIGN KEY (DIVISION_ID) REFERENCES DIVISIONS(ID),
FOREIGN KEY (COMPANY_ID) REFERENCES COMPANIES(ID),
FOREIGN KEY (CUSTOMER_ID) REFERENCES CUSTOMERS(ID)
);

CREATE TABLE SALES_LINES (
ID INT PRIMARY KEY ,
SALES_ID INT NOT NULL,
COMPANY_ID INT NOT NULL,
BILL_NUMBER VARCHAR(50) NOT NULL,
LINE_NUMBER INT NOT NULL,
ITEM_ID INT NOT NULL,
UNIT_PRICE FLOAT,
QTY INT NOT NULL,
COMMENTS VARCHAR(200),
UNIT_DISCOUNT FLOAT  ,
DISC_PERCENT FLOAT  ,
LINE_TOTDISC FLOAT  ,
TAX_PERCENT FLOAT,
TAX_AMOUNT FLOAT,
LINE_TOTAL FLOAT,
IS_VOIDED BOOLEAN DEFAULT FALSE,
CREATED_DATE DATETIME,
LAST_UPDATED_DATE DATETIME,
CREATED_BY VARCHAR(50),
LAST_UPDATED_BY VARCHAR(50),
VERSION INT DEFAULT 1,
FOREIGN KEY (COMPANY_ID) REFERENCES COMPANIES(ID),
FOREIGN KEY (ITEM_ID) REFERENCES ITEMS(ID),
FOREIGN KEY (SALES_ID) REFERENCES SALES(ID)
);

CREATE TABLE SALES_LEADS (
ID INT PRIMARY KEY,
COMPANY_ID INT NOT NULL,
DIVISION_ID INT NOT NULL,
CUSTOMER_ID INT NOT NULL,
DOC_NUMBER VARCHAR(50),
RELEASED_DATE DATETIME,
STATUS VARCHAR(10),
SALES_ASSOCIATE VARCHAR(50),
SALES_WON BOOLEAN DEFAULT FALSE,
SALES_ID INT,
SALESASS_REASON_CODE VARCHAR(10),
MGR_REASON_CODE  VARCHAR(10),
IS_VOIDED BOOLEAN DEFAULT FALSE,
COMMENTS VARCHAR(200),
CREATED_DATE DATETIME,
LAST_UPDATED_DATE DATETIME,
CREATED_BY VARCHAR(50),
LAST_UPDATED_BY VARCHAR(50),
VERSION INT DEFAULT 1,
FOREIGN KEY (COMPANY_ID) REFERENCES COMPANIES(ID),
FOREIGN KEY (DIVISION_ID) REFERENCES DIVISIONS(ID),
FOREIGN KEY (CUSTOMER_ID) REFERENCES CUSTOMERS(ID),
FOREIGN KEY (SALES_ID) REFERENCES SALES(ID),
FOREIGN KEY (MGR_REASON_CODE) REFERENCES FINITE_VALUES(CODE),
FOREIGN KEY (STATUS) REFERENCES FINITE_VALUES(CODE),
FOREIGN KEY (SALESASS_REASON_CODE) REFERENCES FINITE_VALUES(CODE)
);

CREATE TABLE SALESLEAD_ITEMS (
ID INT PRIMARY KEY,
SALESLEAD_ID INT NOT NULL,
COMPANY_ID INT NOT NULL,
DIVISION_ID INT NOT NULL,
LINE_NUMBER INT NOT NULL,
ITEM_ID INT NOT NULL,
QTY INT NOT NULL,
PRICE FLOAT ,
NEGOTITED_PRICE FLOAT ,
SALES_WON BOOLEAN DEFAULT FALSE,
SALES_ID INT,
IS_VOIDED BOOLEAN DEFAULT FALSE,
COMMENTS VARCHAR(200),
CREATED_DATE DATETIME,
LAST_UPDATED_DATE DATETIME,
CREATED_BY VARCHAR(50),
LAST_UPDATED_BY VARCHAR(50),
VERSION INT DEFAULT 1,
FOREIGN KEY (COMPANY_ID) REFERENCES COMPANIES(ID),
FOREIGN KEY (DIVISION_ID) REFERENCES DIVISIONS(ID),
FOREIGN KEY (ITEM_ID) REFERENCES ITEMS(ID),
FOREIGN KEY (SALESLEAD_ID) REFERENCES SALES_LEADS(ID)
);

CREATE TABLE WISHLISTS (
ID INT PRIMARY KEY,
COMPANY_ID INT NOT NULL,
DIVISION_ID INT NOT NULL,
CUSTOMER_ID INT NOT NULL,
DOC_NUMBER VARCHAR(50),
REQUESTED_DATE DATETIME,
SALES_LEAD_GEN BOOLEAN DEFAULT FALSE,
SALES_LEAD_ID INT,
IS_VOIDED BOOLEAN DEFAULT FALSE,
IS_FULFILLED BOOLEAN DEFAULT FALSE,
IS_EXPIRED BOOLEAN DEFAULT FALSE,
COMMENTS VARCHAR(200),
CREATED_DATE DATETIME,
LAST_UPDATED_DATE DATETIME,
CREATED_BY VARCHAR(50),
LAST_UPDATED_BY VARCHAR(50),
VERSION INT DEFAULT 1,
FOREIGN KEY (COMPANY_ID) REFERENCES COMPANIES(ID),
FOREIGN KEY (DIVISION_ID) REFERENCES DIVISIONS(ID),
FOREIGN KEY (CUSTOMER_ID) REFERENCES CUSTOMERS(ID)
);

CREATE TABLE WISHLIST_LINES  (
ID INT PRIMARY KEY,
WISHLIST_ID INT NOT NULL,
COMPANY_ID INT NOT NULL,
DIVISION_ID INT NOT NULL,
DOC_NUMBER VARCHAR(50),
LINE_NUMBER INT NOT NULL,
ITEM_ID INT NOT NULL,
DESIRED_QTY INT NOT NULL,
DESIRED_PRICE FLOAT ,
DESIRED_DATE DATETIME ,
SALES_LEAD_GEN BOOLEAN DEFAULT FALSE,
SALES_LEAD_ID INT,
IS_FULFILLED BOOLEAN DEFAULT FALSE,
IS_VOIDED BOOLEAN DEFAULT FALSE,
IS_EXPIRED BOOLEAN DEFAULT FALSE,
REASON_CODE VARCHAR(10),
COMMENTS VARCHAR(200),
CREATED_DATE DATETIME,
LAST_UPDATED_DATE DATETIME,
CREATED_BY VARCHAR(50),
LAST_UPDATED_BY VARCHAR(50),
VERSION INT DEFAULT 1,
FOREIGN KEY (COMPANY_ID) REFERENCES COMPANIES(ID),
FOREIGN KEY (DIVISION_ID) REFERENCES DIVISIONS(ID),
FOREIGN KEY (ITEM_ID) REFERENCES ITEMS(ID),
FOREIGN KEY (REASON_CODE) REFERENCES FINITE_VALUES(CODE),
FOREIGN KEY (WISHLIST_ID) REFERENCES WISHLISTS(ID)
);


CREATE TABLE CONTACTS (
ID INT PRIMARY KEY AUTO_INCREMENT,
COMPANY_ID INT NOT NULL,
FIRST_NAME VARCHAR(50)  NOT NULL,
LAST_NAME VARCHAR(50)  NOT NULL,
DESCRIPTION VARCHAR(100),
PHONE VARCHAR(50) NOT NULL  ,
EMAIL VARCHAR(50) NOT NULL ,
CONTACT_TYPE VARCHAR(10),
ADDRESS1 VARCHAR(50),
ADDRESS2 VARCHAR(50),
ZIPCODE VARCHAR(50),
CITY VARCHAR(50),
LANDMARK VARCHAR(100),
ALTERNATEPHONE VARCHAR(50), 
IS_DELETED BOOLEAN DEFAULT FALSE,
CREATED_DATE DATETIME,
LAST_UPDATED_DATE DATETIME,
CREATED_BY VARCHAR(50),
LAST_UPDATED_BY VARCHAR(50),
VERSION INT DEFAULT 1,
FOREIGN KEY (COMPANY_ID) REFERENCES COMPANIES(ID),
FOREIGN KEY (CONTACT_TYPE) REFERENCES FINITE_VALUES(CODE)
);

CREATE TABLE FOLLOWUPS (
ID INT PRIMARY KEY AUTO_INCREMENT,
COMPANY_ID INT NOT NULL,
SALESLEAD_ID INT NOT NULL,
CONVERSATION BLOB,
CONFIDENCE_LEVEL VARCHAR(10),
COMMUNICATION_MODE VARCHAR(10),
OFFERED_PRICE FLOAT,
SALES_ASSOCIATE VARCHAR(50),
NEXT_FOLLOWUP DATETIME,
FINAL_FOLLOWUP BOOLEAN DEFAULT FALSE,
RESULT VARCHAR(10),
RESULT_REASON VARCHAR(10) ,
SALESASSOC_COMMENTS BLOB
IS_DELETED BOOLEAN DEFAULT FALSE,
CREATED_DATE DATETIME,
LAST_UPDATED_DATE DATETIME,
CREATED_BY VARCHAR(50),
LAST_UPDATED_BY VARCHAR(50),
VERSION INT DEFAULT 1,
FOREIGN KEY (COMPANY_ID) REFERENCES COMPANIES(ID),
FOREIGN KEY (CONFIDENCE_LEVEL) REFERENCES FINITE_VALUES(CODE),
FOREIGN KEY (SALESLEAD_ID) REFERENCES SALES_LEADS(ID),
FOREIGN KEY (COMMUNICATION_MODE) REFERENCES FINITE_VALUES(CODE),
FOREIGN KEY (RESULT) REFERENCES FINITE_VALUES(CODE),
FOREIGN KEY (RESULT_REASON) REFERENCES FINITE_VALUES(CODE)
);

CREATE TABLE ALERTS (
ID INT PRIMARY KEY AUTO_INCREMENT,
COMPANY_ID INT NOT NULL,
DIVISION_ID INT NOT NULL,
RAISED_DATE DATETIME NOT NULL,
ACTION_DATE DATETIME,
ACKNO_DATE DATETIME ,
ALERT_TYPE VARCHAR(10) NOT NULL,
STATUS VARCHAR(10) NOT NULL,
OWNER  VARCHAR(50),
RAISED_BY VARCHAR(50),
DATA VARCHAR(50) NOT NULL,
URL VARCHAR(100),
IS_DELETED BOOLEAN DEFAULT FALSE,
CREATED_DATE DATETIME,
LAST_UPDATED_DATE DATETIME,
CREATED_BY VARCHAR(50),
LAST_UPDATED_BY VARCHAR(50),
VERSION INT DEFAULT 1,
FOREIGN KEY (COMPANY_ID) REFERENCES COMPANIES(ID),
FOREIGN KEY (DIVISION_ID) REFERENCES DIVISIONS(ID),
FOREIGN KEY (ALERT_TYPE) REFERENCES FINITE_VALUES(CODE),
FOREIGN KEY (STATUS) REFERENCES FINITE_VALUES(CODE),
FOREIGN KEY (OWNER) REFERENCES USERS(USER_ID)
);





CREATE TABLE RULE_LINES (
ID INT PRIMARY KEY AUTO_INCREMENT,
COMPANY_ID INT NOT NULL,
METADATA  VARCHAR(50) NOT NULL,
FIELD  VARCHAR(50) NOT NULL,
OPERATOR VARCHAR(10) NOT NULL,
VALUE VARCHAR(50) NOT NULL,
)

CREATE TABLE CUSTOMER_CATEGORIES (
ID INT PRIMARY KEY AUTO_INCREMENT,
COMPANY_ID INT NOT NULL,

EVAL_FROM VARCHAR(10),
EVAL_TO VARCHAR(10),

